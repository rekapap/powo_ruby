<section class="card">
  <h1 class="h1">Taxon lookup</h1>
  <p class="muted">
    Endpoint: <code>/taxon</code>. Powered by <code>PowoRuby.powo.taxa.lookup</code>.
  </p>

  <% if defined?(@config_error) && @config_error %>
    <div class="alert alert--error">
      <strong>Config error:</strong> <%= h(@config_error) %>
    </div>
  <% end %>

  <% if defined?(@error) && @error %>
    <div class="alert alert--error">
      <strong>Error:</strong> <%= h(@error) %>
    </div>
  <% end %>

  <form method="get" action="/taxon" class="form">
    <div class="grid">
      <label class="field field--full">
        <span class="field__label">Identifier (required)</span>
        <input class="field__input" type="text" name="id" value="<%= h(@id) %>" placeholder="urn:lsid:ipni.org:names:30000618-2" />
      </label>
    </div>
    <div class="actions">
      <button class="btn" type="submit">Lookup</button>
      <a class="btn btn--secondary" href="/">Back</a>
    </div>
  </form>
</section>

<% if defined?(@powo_response) && @powo_response %>
  <section class="card">
    <h2 class="h2">Raw response</h2>
    <details class="details" open>
      <summary>JSON</summary>
      <pre class="pre"><%= h(pretty_json(@powo_response.raw)) %></pre>
    </details>
  </section>
<% end %>

